{% extends "page.html" %}
{% import 'macros/form.html' as form %}



{% block breadcrumb_content %}
  <li>{% link_for _('Call'), named_route='call.index' %}</li>
  <li>{% link_for _(service_ins.app_name), named_route='service.read',id=ins.app_id %}</li>
  <li class="active">{% link_for ins.call_id, named_route='call.read', id=ins.call_id %}</li>
{% endblock %}


{% block content_action %}{% endblock %}


{% block primary %}
  <div class="col-12">
    <article class="module">
      {#      <header class="module-content page-header">#}
      {#        <div class="content_action md-ml-10 md-mb-10">#}
      {#          <a class="btn btn-danger" href="/service/821c869f-36f7-4de6-a0da-1d941508fc0e/delete"><i#}
      {#                  class="fa fa-trash"></i> Delete</a>#}
      {#        </div>#}
      {#        <div class="content_action md-mb-10">#}
      {#          <a class="btn btn-default" data-toggle="modal" data-target="#ManageModal"><i class="fa fa-wrench"></i> Manage</a>#}
      {#        </div>#}
      {#      </header>#}
      <div class="module-content">
        <div class=" md-ml-10" style="margin-bottom: 20px;">
          <div class="request-zone"
               style="border: 1px solid #ccc!important;border-radius: 16px;padding: 0.01em 15px; margin-left: 150px;margin-right: 150px">
            <h3>Input</h3>
            <form id="input-form" class="dataset-form md-mb-15 form-horizontal"
                  data-module="basic-form" novalidate="">
              {% for input in ins.inputs %}
                {% snippet "call/snippets/redirect_input.html",field=input,call_id=ins.call_id,type='input' %}
              {% endfor %}

            </form>
          </div>
        </div>
        <div class="md-ml-10" style="margin-bottom: 20px;">
          <div class="request-zone"
               style="border: 1px solid #ccc!important;border-radius: 16px;padding: 0.01em 15px; margin-left: 150px;margin-right: 150px">
            <h3>Output</h3>
            <form id="input-form" class="dataset-form md-mb-15 form-horizontal"
                  data-module="basic-form" novalidate="">
              {% if ins.call_status=='SUCCESS' %}
                {% for input in ins.outputs %}
                  {% snippet "call/snippets/redirect_input.html",field=input,call_id=ins.call_id ,type='input' %}
                {% endfor %}
                {% elif ins.call_status=='FAILED' %}
                <p>Run failed: something go wrong</p>
              {% else %}
                <p>Wait the minutes or check call status</p>
              {% endif %}
            </form>
          </div>
        </div>
        {% if ins.get('logs')!=None%}
          <div class="md-ml-10">
            <div class="request-zone"
                 style="border: 1px solid #ccc!important;border-radius: 16px;padding: 0.01em 15px; margin-left: 150px;margin-right: 150px">
              <h3>Logs</h3>
              <form id="input-form" class="dataset-form md-mb-15 form-horizontal"
                    data-module="basic-form" novalidate="">
                <p readonly>{{ ins.logs }}</p>
              </form>
            </div>
          </div>
        {% endif %}
      </div>
    </article>
  </div>

{% endblock %}



{% block secondary %}{% endblock %}



{% block scripts %}
  {{ super() }}
  <style>
    label:after {
      content: "";
    }
  </style>
  <script>
    {#let json = {{  input|tojson }};#}
    {#console.log(json['values'])#}
  </script>
{% endblock %}
