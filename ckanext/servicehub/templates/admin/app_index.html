{% extends "page.html" %}
{% import 'macros/form.html' as form %}



{% block breadcrumb_content %}
    <li>{% link_for _('App Admin'), named_route='admin.index' %}</li>
    {#  <li class="active">{% link_for ins.app_name, named_route='service.read', id=ins.app_id %}</li>#}
{% endblock %}


{% block content_action %}{% endblock %}


{% block primary %}
    <article class="module">
        <header class="module-content page-header">
            <ul class="nav nav-tabs">
                <li class="active"><a href={{ h.url_for('appadmin.index') }}><i class="fa fa-sitemap"></i> App Management</a></li>
                <li><a href={{ h.url_for('prjadmin.index') }}><i class="fa fa-clock-o"></i> Propject Management</a></li>
                <li><a href={{ h.url_for('logadmin.index') }}><i class="fa fa-cogs"></i> System log Management</a></li>
                <li><a href={{ h.url_for('sysadmin.index') }}><i class="fa fa-cog"></i> System monitor Management</a></li>
            </ul>
        </header>
        <div class="module-content">

            <table id="myDataTable" class="table table-striped table-bordered">
                <thead>
                <tr>
                    <th>App Id</th>
                    <th>App Name</th>
                    <th>Owner</th>
                    <th>Organization</th>
                    <th>App Status</th>
                    <th></th>
                </tr>
                </thead>
                <tbody>
                </tbody>
            </table>
        </div>
    </article>
{% endblock %}
{% block secondary %}{% endblock %}



{% block scripts %}
    {{ super() }}
    <style>
        label:after {
            content: "";
        }
    </style>

    <script>

        document.addEventListener("DOMContentLoaded", function (event) {
            var oTable = $('#myDataTable').dataTable({
                "ajax": {
                    "url": "/appadmin/ajax",
                    "type": "GET",
                    "dataSrc": ""
                },
                // "sPaginationType": "full_numbers",
                "aoColumns": [
                    {
                        "sWidth": "25%",
                        "mData": 0
                    }, {
                        "sWidth": "15%",
                        "mData": 1
                    },
                    {
                        "sWidth": "10%",
                        "mData": 2
                    },
                    {
                        "sWidth": "10%",
                        "mData": 3
                    }, {
                        "sWidth": "10%",
                        "mData": 4
                    },
                    {
                        "mData": 0,
                        "sWidth": "30%",
                        "bSortable": false,
                        "mRender": function (data, type, full) {
                            return `
          <a class="btn btn-danger btn-sm" href={{ h.url_for('appadmin.action',action_name='delete') }}?app_id=${data}>Delete</a>
          <a class="btn btn-danger btn-sm" href={{ h.url_for('appadmin.action',action_name='stop') }}?app_id=${data}>Stop</a>
          <a class="btn btn-primary btn-sm" href={{ h.url_for('appadmin.action',action_name='debug') }}?app_id=${data}>Debug</a>
          <a class="btn btn-success btn-sm" href={{ h.url_for('appadmin.action',action_name='start') }}?app_id=${data}>Start</a>
          <a class="btn btn-info btn-sm" href=/service/${data}>Detail</a>
          `;
                        }
                    }]
            });

        });
    </script>
{% endblock %}
